#include "inc\\common.h"

int main(void)
{
    uint8_t pict[][8] = { // Кадры анимации
        {0b00111100, 0b01000010, 0b10011001, 0b10100001, 0b10100001, 0b10011001, 0b01000010, 0b00111100},
        {0b00111100, 0b01000010, 0b10010001, 0b10100001, 0b10100101, 0b10011001, 0b01000010, 0b00111100},
        {0b00111100, 0b01000010, 0b10000001, 0b10100101, 0b10100101, 0b10011001, 0b01000010, 0b00111100},
        {0b00111100, 0b01000010, 0b10001001, 0b10000101, 0b10100101, 0b10011001, 0b01000010, 0b00111100},
        {0b00111100, 0b01000010, 0b10011001, 0b10000101, 0b10000101, 0b10011001, 0b01000010, 0b00111100},
        {0b00111100, 0b01000010, 0b10011001, 0b10100101, 0b10000101, 0b10001001, 0b01000010, 0b00111100},
        {0b00111100, 0b01000010, 0b10011001, 0b10100101, 0b10100101, 0b10000001, 0b01000010, 0b00111100},
        {0b00111100, 0b01000010, 0b10011001, 0b10100101, 0b10100101, 0b10010001, 0b01000010, 0b00111100}
    };
    uint8_t len=sizeof(pict)/sizeof(pict[0]); // Количесвто кадров в анимации
    init_twi(DEV_ADDR); // Настройка протокола TWI и  драйвера IS31FL3728
    while (1)
    {
        for (uint8_t i=0; i<len;i++) // Цикл по кадрам
        {
            matrDrawPict(DEV_ADDR, pict[i]); // Вывод кадра
            _delay_ms(100); // Пауза 100 ms
        }
    }
}